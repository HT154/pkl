import "encoding1.msgpack.yaml.pkl" as encoding1

import "pkl:encoding"

original: encoding1.Foo = encoding1.noFunc

decoded: encoding1.Foo =
  new encoding.PklBinaryEncodingParser {
    imports {
      encoding1
    }
  }
    .parse(encoding1.encoded) as encoding1.Foo

decodedClass = decoded.getClass().toString()

didRoundTrip: Boolean = decoded == encoding1.noFunc

output = new {
  value = outer
  renderer {
    converters {
      [Class] = (it) -> it.toString()
      [TypeAlias] = (it) -> it.toString()
      [Function] = (_) -> null
    }
  }
}
